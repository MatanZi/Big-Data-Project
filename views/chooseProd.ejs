<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
	


    <title>Sign Up Form by Colorlib</title>

    <!-- Font Icon -->
    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">

    <!-- Main css -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="main">

        <div class="container">
            <div class="booking-content">
                 <div id="chartContainer" class="booking-image"></div>
                <div class="booking-form">
                    <form action="/graph2" id="myForm" name="myForm" method="POST">
                        <h2>Price Distribution</h2>
			
                        <div class="form-group form-input">
                            	<label for="bday" >Date Range:</label>
                                    <input type="date" id="from" name="from" required pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" class="button date-from">
                                    <span class="validity"></span>
                        </div>
			

			<div class="form-group form-input">
                                    <input type="date" id="to" name="to" required pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" value="from date" class="button date-to">
                                    <span class="validity"></span>
                        </div>

                        <div class="form-group form-input">
                         	<label for="ccexpm">Product:</label>
                                    <select id = "ccexpm" name = "ccexpm" class="button product">     
				    <% for(var i=0; i < dropdownVals.length; i++) { %>
					<option style="background-color:black"><%= dropdownVals[i] %></option>
				    <% } %>
                                </select>
                        </div>


			<div class="form-submit">
                            		 <button type="submit" value="submit" onclick="gData(); return false" class="submit">Submit</button>

                      	</div>
			
			</br>
			</br>

			<div class="form-group form-input">
                          <a href="/logout">Logout</a>
                        </div>

                    </form>
                </div>
            </div>
        </div>

    </div>

    <!-- JS -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="js/main.js"></script>
</body><!-- This templates was made by Colorlib (https://colorlib.com) -->


<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"> </script>
<script src="../Chart.js"></script>
<script>
  // code to draw graph
	
   function gData() {
	
    $.post("http://localhost:3000/graph2",  $('#myForm').serialize() ,function(result, status) {

	var chart = new CanvasJS.Chart("chartContainer", {
	theme:"light2",
	animationEnabled: true,
	title:{
		text: "Price Distribution for " + result[0].toString()
	},
	axisY :{
		includeZero: false,
		title: "Price",
		suffix: "Nis"
	},
	toolTip: {
		shared: "true"
	},
	legend:{
		cursor:"pointer",
		itemclick : toggleDataSeries
	},
	data: [{
		type: "spline",
		visible: true,
		showInLegend: true,
		yValueFormatString: "##.00Nis",
		name: "AM:PM",
		dataPoints: result[1][0]
	}]
});
chart.render();

function toggleDataSeries(e) {
	if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible ){
		e.dataSeries.visible = false;
	} else {
		e.dataSeries.visible = true;
	}
	chart.render();
}


    });

 }



</script>






</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
	


    <title>Sign Up Form by Colorlib</title>

    <!-- Font Icon -->
    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">

    <!-- Main css -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
 
    <div class="main">
        <div class="container">
            <div class="booking-content">
                 <div id="chartContainer" class="booking-image"></div>
                <div class="booking-form">
                    <form action="/graph2" id="myForm" name="myForm" method="POST">
                        <h2>Price Distribution</h2>
			
                        <div class="form-group form-input">
                            	<label for="bday" >Date Range:</label>
                                    <input type="date" id="from" name="from" required pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" class="button date-from">
                                    <span class="validity"></span>
                        </div>
			

			<div class="form-group form-input">
                                    <input type="date" id="to" name="to" required pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" value="from date" class="button date-to">
                                    <span class="validity"></span>
                        </div>

                        <div class="form-group form-input">
                         	<label for="ccexpm">Product:</label>
                                    <select id = "ccexpm" name = "ccexpm" class="button product">     
				    <% for(var i=0; i < dropdownVals.length; i++) { %>
					<option style="background-color:black"><%= dropdownVals[i] %></option>
				    <% } %>
                                </select>
                        </div>


			<div class="form-submit">
                            		 <button type="submit" value="submit" onclick="gData(); return false" class="submit">Submit</button>

                      	</div>
			

                    </form>
                </div>
            </div>
        </div>

    </div>

    <!-- JS -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="js/main.js"></script>
</body><!-- This templates was made by Colorlib (https://colorlib.com) -->


<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"> </script>
<script src="../Chart.js"></script>
<script>
  // code to draw graph
	
   function gData() {
	
    $.post("http://localhost:3000/graph2",  $('#myForm').serialize() ,function(result, status) {

	var chart = new CanvasJS.Chart("chartContainer", {
	theme:"light2",
	animationEnabled: true,
	title:{
		text: "Price Distribution for " + result[0].toString()
	},
	axisY :{
		includeZero: false,
		title: "Price",
		suffix: "Nis"
	},
	toolTip: {
		shared: "true"
	},
	legend:{
		cursor:"pointer",
		itemclick : toggleDataSeries
	},
	data: [{
		type: "spline",
		visible: true,
		showInLegend: true,
		yValueFormatString: "##.00Nis",
		name: "AM:PM",
		dataPoints: result[1][0]
	},
		{type: "spline",
		visible: true,
		showInLegend: true,
		yValueFormatString: "##.00Nis",
		name: "Shufersal",
		dataPoints: result[1][1]},
		{type: "spline",
		visible: true,
		showInLegend: true,
		yValueFormatString: "##.00Nis",
		name: "Osher Ad",
		dataPoints: result[1][2]},
		{type: "spline",
		visible: true,
		showInLegend: true,
		yValueFormatString: "##.00Nis",
		name: "Mega Bair",
		dataPoints: result[1][3]}]
});
chart.render();

function toggleDataSeries(e) {
	if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible ){
		e.dataSeries.visible = false;
	} else {
		e.dataSeries.visible = true;
	}
	chart.render();
}


    });

 }



</script>






</html>
